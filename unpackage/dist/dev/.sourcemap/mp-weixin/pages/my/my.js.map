{"version":3,"file":"my.js","sources":["pages/my/my.vue","D:/sougougaosuxiazai/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbXkvbXkudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"content\">\r\n\t\t<view class=\"topBox\">\r\n\t\t\t<view class=\"setbox\">\r\n\t\t\t\t<view class=\"set-left\">\r\n\t\t\t\t\t<uni-icons type=\"calendar\" size=\"30\" color=\"#fff\"></uni-icons>\r\n\t\t\t\t\t<view class=\"set-left-text\">签到</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"set-right\">\r\n\t\t\t\t\t<uni-icons type=\"gear\" size=\"30\" color=\"#fff\"></uni-icons>\r\n\t\t\t\t\t<uni-icons type=\"chat\" size=\"30\" color=\"#fff\"></uni-icons>\r\n\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t\t<view class=\"users\">\r\n\t\t\t\t<view class=\"users-top\" @click=\"setFun\">\r\n\t\t\t\t\t<template v-if=\"!userInfo.nickName\">\r\n\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t<image src=\"../../static/tt.jpg\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<view class=\"tit\">\r\n\t\t\t\t\t\t\t注册/登录\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t<image :src=\"userInfo.avatarUrl\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<view class=\"tit\">\r\n\t\t\t\t\t\t\t{{userInfo.nickName}}\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"users-bottom\">\r\n\t\t\t\t\t<view class=\"users-item\">\r\n\t\t\t\t\t\t<view class=\"num\">12</view>\r\n\t\t\t\t\t\t<view class=\"users-item-tit\">点赞</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"users-item\">\r\n\t\t\t\t\t\t<view class=\"num\">24</view>\r\n\t\t\t\t\t\t<view class=\"users-item-tit\">喜欢</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"users-item\">\r\n\t\t\t\t\t\t<view class=\"num\">38</view>\r\n\t\t\t\t\t\t<view class=\"users-item-tit\">浏览</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"users-item\">\r\n\t\t\t\t\t\t<view class=\"num\">34</view>\r\n\t\t\t\t\t\t<view class=\"users-item-tit\">收藏</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"listBox\">\r\n\t\t\t<view class=\"listBox-list\">\r\n\t\t\t\t<uni-list>\r\n\t\t\t\t\t<uni-list-item :show-extra-icon=\"true\" :extra-icon=\"extraIcon1\" showArrow\r\n\t\t\t\t\t\ttitle=\"个人信息\" clickable></uni-list-item>\r\n\t\t\t\t\t\t<uni-list-item :show-extra-icon=\"true\" :extra-icon=\"extraIcon2\" showArrow\r\n\t\t\t\t\t\t\ttitle=\"我的购物车\" clickable></uni-list-item>\r\n\t\t\t\t\t\t\t<uni-list-item :show-extra-icon=\"true\" :extra-icon=\"extraIcon3\" showArrow\r\n\t\t\t\t\t\t\t\ttitle=\"用户反馈\" clickable></uni-list-item>\r\n\t\t\t\t\t\t\t\t<uni-list-item :show-extra-icon=\"true\" :extra-icon=\"extraIcon4\" showArrow\r\n\t\t\t\t\t\t\t\t\ttitle=\"我的邮件\" clickable></uni-list-item>\r\n\t\t\t\t\t\t\t\t\t<uni-list-item :show-extra-icon=\"true\" :extra-icon=\"extraIcon5\" showArrow\r\n\t\t\t\t\t\t\t\t\t\ttitle=\"分享有礼\" clickable></uni-list-item>\r\n\t\t\t\t</uni-list>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<up-popup closeable :show=\"show\" @close=\"close\">\r\n\t\t\t<view class=\"popup\">\r\n\t\t\t\t<view class=\"title\">获取您的昵称，头像</view>\r\n\t\t\t\t<view class=\"flex\">\r\n\t\t\t\t\t<view class=\"label\">获取用户头像：</view>\r\n\t\t\t\t\t<button class=\"warpper\" open-type=\"chooseAvatar\" @chooseavatar=\"onChooseavatar\">\r\n\t\t\t\t\t\t<image :src=\"userInfo.avatarUrl\" class=\"warpper-image\" mode=\"aspectFill\"></image>\r\n\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex\">\r\n\t\t\t\t\t<view class=\"label\">获取用户昵称：</view>\r\n\t\t\t\t\t<input @input=\"changeName\" type=\"nickname\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<button size=\"default\" type=\"primary\" @click=\"userSubmit\">确定</button>\r\n\t\t\t</view>\r\n\t\t</up-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\treactive\r\n\t} from 'vue';\r\n\timport {\r\n\t\tonLoad\r\n\t} from '@dcloudio/uni-app'\r\n\r\n\timport {\r\n\t\tgetLogin,\r\n\t\tgetUserInfo\r\n\t} from \"../../api/api.js\"\r\n\tconst userInfo = reactive({\r\n\t\tnickName: '',\r\n\t\tavatarUrl: ''\r\n\r\n\t});\r\n\t// 图标处理\r\n\tconst extraIcon1 = reactive({\r\n\t\tcolor: '#666666',\r\n\t\tsize: '22',\r\n\t\ttype: 'auth'\r\n\t});\r\n\tconst extraIcon2 = reactive({\r\n\t\tcolor: '#666666',\r\n\t\tsize: '22',\r\n\t\ttype: 'cart'\r\n\t});\r\n\tconst extraIcon3 = reactive({\r\n\t\tcolor: '#666666',\r\n\t\tsize: '22',\r\n\t\ttype: 'chatboxes'\r\n\t});\r\n\tconst extraIcon4 = reactive({\r\n\t\tcolor: '#666666',\r\n\t\tsize: '22',\r\n\t\ttype: 'email'\r\n\t});\r\n\tconst extraIcon5 = reactive({\r\n\t\tcolor: '#666666',\r\n\t\tsize: '22',\r\n\t\ttype: 'gift'\r\n\t});\r\n\tonLoad(async () => {\r\n\t\t// 免登逻辑\r\n\t\tif (uni.getStorageSync('token') && !uni.getStorageSync('userInfo')) {\r\n\t\t\ttry {\r\n\t\t\t\tconst userName = await getUserInfo();\r\n\t\t\t\tuserInfo.nickName = userName.data.nickName;\r\n\t\t\t\tuserInfo.avatarUrl = userName.data.avatarUrl;\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// 错误处理\r\n\t\t\t\tconsole.error('获取用户信息失败', e);\r\n\t\t\t}\r\n\t\t} else if (uni.getStorageSync('token') && uni.getStorageSync('userInfo')) {\r\n\t\t\ttry {\r\n\t\t\t\tconst userInfoStr = uni.getStorageSync('userInfo');\r\n\t\t\t\tif (userInfoStr) {\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\tnickName,\r\n\t\t\t\t\t\tavatarUrl\r\n\t\t\t\t\t} = JSON.parse(userInfoStr);\r\n\t\t\t\t\tuserInfo.nickName = nickName;\r\n\t\t\t\t\tuserInfo.avatarUrl = avatarUrl;\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// 错误处理\r\n\t\t\t\tconsole.error('解析用户信息失败', e);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\tconst show = ref(false);\r\n\tconst close = () => {\r\n\t\t// 关闭逻辑，设置 show 为 false  \r\n\r\n\t\tshow.value = false;\r\n\t\t\r\n\t}\r\n\t// 点击按钮获取用户信息\r\n\tconst onChooseavatar = (e) => {\r\n\t\r\n\t\tuserInfo.avatarUrl = e.detail.avatarUrl\r\n\r\n\t}\r\n\tconst changeName = (e) => {\r\n\t\tuserInfo.nickName = e.detail.value\r\n\t}\r\n\tconst userSubmit = () => {\r\n\r\n\t\tuni.setStorageSync('userInfo', JSON.stringify(userInfo))\r\n\t\tshow.value = false;\r\n\t}\r\n\tconst setFun = () => {\r\n\t\t// 给用户一个确认的提醒\r\n\t\tuni.showModal({\r\n\t\t\ttitle: '温馨提示',\r\n\t\t\tcontent: '亲,授权微信登录后才能正常使用小程序',\r\n\t\t\tsuccess(res) {\r\n\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\tuni.login({\r\n\t\t\t\t\t\tsuccess: async (data) => {\r\n\t\t\t\t\t\t\tconst token = await getLogin(data.code)\r\n\r\n\t\t\t\t\t\t\tuni.setStorageSync('token', token.data.token)\r\n\t\t\t\t\t\t\tconst userName = await getUserInfo()\r\n\t\t\t\t\t\t\tuserInfo.nickName = userName.data.nickName\r\n\t\t\t\t\t\t\tuserInfo.avatarUrl = userName.data.avatarUrl\r\n\t\t\t\t\t\t\tshow.value = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.content {\r\n\t\theight: 100vh;\r\n\t\tbackground-color: #f5f5f5;\r\n\r\n\t\t.topBox {\r\n\t\t\twidth: 100%;\r\n\t\t\tposition: relative;\r\n\t\t\tz-index: 1;\r\n\t\t\toverflow: hidden;\r\n\t\t\tpadding: 40rpx 20rpx 40rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t}\r\n\r\n\t\t.topBox::after {\r\n\t\t\tcontent: '';\r\n\t\t\twidth: 140%;\r\n\t\t\theight: 300rpx;\r\n\t\t\tposition: absolute;\r\n\t\t\tz-index: -1;\r\n\t\t\ttop: 0%;\r\n\t\t\tleft: -20%;\r\n\t\t\tbackground-color: #00aaff;\r\n\t\t\tborder-radius: 0 0 50% 30%;\r\n\t\t}\r\n\r\n\t\t.popup {\r\n\t\t\tpadding: 20rpx;\r\n\t\t\tborder-radius: 20rpx;\r\n\r\n\t\t\t.title {\r\n\t\t\t\tfont-size: 40rpx;\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t}\r\n\r\n\t\t\t.flex {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: flex-start;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tborder-bottom: 1px solid #f5f5f5;\r\n\t\t\t\tpadding: 24rpx 0;\r\n\r\n\t\t\t\t.warpper-image {\r\n\t\t\t\t\twidth: 70rpx;\r\n\t\t\t\t\theight: 70rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.warpper {\r\n\t\t\t\t\tborder: none;\r\n\t\t\t\t\tborder-radius: 10rpx;\r\n\t\t\t\t\twidth: 70rpx;\r\n\t\t\t\t\theight: 70rpx;\r\n\t\t\t\t\tmargin-left: 20rpx;\r\n\t\t\t\t\tpadding: 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.users {\r\n\t\t\tmargin-top: 35rpx;\r\n\t\t\tpadding: 30rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\theight: 280rpx;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tbox-shadow: 1rpx 10rpx 20rpx #ececec;\r\n\t\t\tborder-radius: 16rpx;\r\n\r\n\t\t\t.users-top {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: flex-start;\r\n\t\t\t\tflex-wrap: nowrap;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin-bottom: 30rpx;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 100rpx;\r\n\t\t\t\t\theight: 100rpx;\r\n\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.tit {\r\n\t\t\t\t\tfont-size: 34rpx;\r\n\t\t\t\t\tfont-weight: 700;\r\n\t\t\t\t\tcolor: #000;\r\n\t\t\t\t\twidth: auto;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.users-bottom {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-around;\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t.users-item {\r\n\t\t\t\t\ttext-align: center;\r\n\r\n\t\t\t\t\t.users-item-tit {\r\n\t\t\t\t\t\tcolor: #757575;\r\n\t\t\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\t\t\tmargin-top: 10rpx;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.num {\r\n\t\t\t\t\t\tcolor: #000;\r\n\t\t\t\t\t\tfont-size: 33rpx;\r\n\t\t\t\t\t\tfont-weight: 700;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.setbox {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talgin-item: center;\r\n\r\n\t\t\t.set-left {\r\n\t\t\t\twidth: 18%;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t.set-left-text {\r\n\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.listBox{\r\n\t\t\theight: 200rpx;\r\n\t\t\tmargin: -10rpx auto 0;\r\n\t\t\tpadding: 20rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\tborder-radius: 12rpx;\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'E:/uniapp/tourismuniapp/pages/my/my.vue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","onLoad","uni","getUserInfo","ref","getLogin"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAuGC,UAAM,WAAWA,cAAAA,SAAS;AAAA,MACzB,UAAU;AAAA,MACV,WAAW;AAAA,IAEb,CAAE;AAED,UAAM,aAAaA,cAAAA,SAAS;AAAA,MAC3B,OAAO;AAAA,MACP,MAAM;AAAA,MACN,MAAM;AAAA,IACR,CAAE;AACD,UAAM,aAAaA,cAAAA,SAAS;AAAA,MAC3B,OAAO;AAAA,MACP,MAAM;AAAA,MACN,MAAM;AAAA,IACR,CAAE;AACD,UAAM,aAAaA,cAAAA,SAAS;AAAA,MAC3B,OAAO;AAAA,MACP,MAAM;AAAA,MACN,MAAM;AAAA,IACR,CAAE;AACD,UAAM,aAAaA,cAAAA,SAAS;AAAA,MAC3B,OAAO;AAAA,MACP,MAAM;AAAA,MACN,MAAM;AAAA,IACR,CAAE;AACD,UAAM,aAAaA,cAAAA,SAAS;AAAA,MAC3B,OAAO;AAAA,MACP,MAAM;AAAA,MACN,MAAM;AAAA,IACR,CAAE;AACDC,kBAAAA,OAAO,YAAY;AAElB,UAAIC,cAAAA,MAAI,eAAe,OAAO,KAAK,CAACA,oBAAI,eAAe,UAAU,GAAG;AACnE,YAAI;AACH,gBAAM,WAAW,MAAMC,QAAAA;AACvB,mBAAS,WAAW,SAAS,KAAK;AAClC,mBAAS,YAAY,SAAS,KAAK;AAAA,QACnC,SAAQ,GAAG;AAEXD,uEAAc,YAAY,CAAC;AAAA,QAC3B;AAAA,MACJ,WAAaA,cAAG,MAAC,eAAe,OAAO,KAAKA,oBAAI,eAAe,UAAU,GAAG;AACzE,YAAI;AACH,gBAAM,cAAcA,cAAAA,MAAI,eAAe,UAAU;AACjD,cAAI,aAAa;AAChB,kBAAM;AAAA,cACL;AAAA,cACA;AAAA,YACN,IAAS,KAAK,MAAM,WAAW;AAC1B,qBAAS,WAAW;AACpB,qBAAS,YAAY;AAAA,UACrB;AAAA,QACD,SAAQ,GAAG;AAEXA,uEAAc,YAAY,CAAC;AAAA,QAC3B;AAAA,MACD;AAAA,IACH,CAAE;AACD,UAAM,OAAOE,kBAAI,KAAK;AACtB,UAAM,QAAQ,MAAM;AAGnB,WAAK,QAAQ;AAAA,IAEb;AAED,UAAM,iBAAiB,CAAC,MAAM;AAE7B,eAAS,YAAY,EAAE,OAAO;AAAA,IAE9B;AACD,UAAM,aAAa,CAAC,MAAM;AACzB,eAAS,WAAW,EAAE,OAAO;AAAA,IAC7B;AACD,UAAM,aAAa,MAAM;AAExBF,oBAAG,MAAC,eAAe,YAAY,KAAK,UAAU,QAAQ,CAAC;AACvD,WAAK,QAAQ;AAAA,IACb;AACD,UAAM,SAAS,MAAM;AAEpBA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,QAAQ,KAAK;AACZ,cAAI,IAAI,SAAS;AAChBA,0BAAAA,MAAI,MAAM;AAAA,cACT,SAAS,OAAO,SAAS;AACxB,sBAAM,QAAQ,MAAMG,iBAAS,KAAK,IAAI;AAEtCH,8BAAAA,MAAI,eAAe,SAAS,MAAM,KAAK,KAAK;AAC5C,sBAAM,WAAW,MAAMC,oBAAa;AACpC,yBAAS,WAAW,SAAS,KAAK;AAClC,yBAAS,YAAY,SAAS,KAAK;AACnC,qBAAK,QAAQ;AAAA,cACb;AAAA,YACP,CAAM;AAAA,UAED;AAAA,QAED;AAAA,MACJ,CAAG;AAAA,IACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7MF,GAAG,WAAW,eAAe;"}