{"version":3,"file":"http.js","sources":["api/http.js"],"sourcesContent":["// e:\\uniapp\\旅游uniapp\\api\\http.js\r\n\r\nlet baseURL = 'https://m1.apifoxmock.com/m1/4728220-0-default/api'; // 替换为你的接口基础地址\r\n// to通过环境进行判断\r\n// if(process.env.NODE_ENV==='development'){\r\n// \tbaseURL='http://localhost:44614/api'\r\n// }else{\r\n// \tbaseURL='https://m1.apifoxmock.com/m1/4728220-0-default/api'\r\n// }\r\n\r\nexport default function http(\r\n\turl,\r\n\tdata = {},\r\n\tmethod = 'GET'\r\n\r\n) {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tuni.request({\r\n\t\t\turl: baseURL + url,\r\n\t\t\tdata,\r\n\t\t\tmethod,\r\n\t\t\theader: {\r\n\t\t\t\t\"token\": uni.getStorageSync('token') || ''\r\n\t\t\t},\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\tif (res.data.code == 1) {\r\n\t\t\t\t\t\tresolve(res.data);\r\n\t\t\t\t\t} else if (res.data.code == 0) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.data.msg,\r\n\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treject(res.data.msg);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\treject(res.data.msg);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: (err) => {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: \"服务器请求异常，请联系管理员\",\r\n\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}"],"names":["uni"],"mappings":";;AAEA,IAAI,UAAU;AAQd,SAAwB,KACvB,KACA,OAAO,CAAA,GACP,SAAS,OAER;AACD,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACvCA,kBAAAA,MAAI,QAAQ;AAAA,MACX,KAAK,UAAU;AAAA,MACf;AAAA,MACA;AAAA,MACA,QAAQ;AAAA,QACP,SAASA,cAAA,MAAI,eAAe,OAAO,KAAK;AAAA,MACzC;AAAA,MACA,SAAS,CAAC,QAAQ;AACb,YAAA,IAAI,eAAe,KAAK;AACvB,cAAA,IAAI,KAAK,QAAQ,GAAG;AACvB,oBAAQ,IAAI,IAAI;AAAA,UACN,WAAA,IAAI,KAAK,QAAQ,GAAG;AAC9BA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO,IAAI,KAAK;AAAA,cAChB,MAAM;AAAA,YAAA,CACN;AACM,mBAAA,IAAI,KAAK,GAAG;AAAA,UACpB;AAAA,QAAA,OAEM;AACC,iBAAA,IAAI,KAAK,GAAG;AAAA,QACpB;AAAA,MACD;AAAA,MACA,MAAM,CAAC,QAAQ;AACdA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACN;AAAA,MACF;AAAA,IAAA,CACA;AAAA,EAAA,CACD;AACF;;"}